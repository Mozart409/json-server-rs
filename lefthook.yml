# Lefthook configuration for json-server-rs
# Reference: https://lefthook.dev/configuration/

pre-commit:
  parallel: true
  jobs:
    - name: cargo-fmt
      glob: "*.rs"
      run: cargo fmt -- --check

    - name: cargo-clippy
      glob: "*.rs"
      run: cargo clippy --all-targets -- -D warnings

    - name: cargo-check
      glob: "*.rs"
      run: cargo check --quiet

pre-push:
  parallel: true
  jobs:
    - name: cargo-test
      run: cargo test --quiet

    - name: cargo-build-release
      run: cargo build --release --quiet

    - name: cargo-audit
      run: cargo audit --quiet
